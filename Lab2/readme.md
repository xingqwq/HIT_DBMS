## 构建概念数据库

建立一个博客网站管理的数据库系统，为构建概念数据库，下面分析博客网站管理数据库实体与联系并画出ER图。

### 实体
1. 板块：**板块编号**、板块名称（唯一性约束）、板块简介
2. 板块负责人：**身份证号**、姓名、联系方式
3. 创作组：**板块编号**、**创作组编号**、创作组名称（唯一性约束）、创作组简介
4. 创作组负责人：**身份证号**、姓名、联系方式
5. 话题：**话题编号**、话题名称（唯一性约束）、话题简介、创建时间
6. 文章：**文章编号**、文章名称、文章存储地址
7. 用户：**用户编号**、用户昵称（唯一性约束）、联系方式
8. 活动：**活动编号**、活动名称（唯一性约束）、活动内容、参与方式

### 联系
1. 板块负责人和板块构成“管理板块”联系，属于1:n联系
    **身份证ID**，**板块编号**，开始时间，结束时间
2. 创作组负责人和创作组构成“管理创作组”联系，属于1:1联系
    **身份证ID**，**板块编号**，**创作组编号**，开始时间，结束时间
3. 用户和文章构成“评论文章”联系，属于m:n联系
    **用户编号**，**文章编号**，评论时间，情绪
4. 用户和活动构成“参与活动”联系，属于m:n联系
    **用户编号**，**活动编号**，参与时间
5. 创作组和话题构成“负责话题”联系，属于m:n联系
    **板块编号**，**创作组编号**，**话题编号**，开始时间，结束时间
6. 创作组和文章构成“发布文章”联系，属于1:n联系
    **板块编号**，**创作组编号**、**文章编号**、发布时间
7. 文章和话题组成“参与话题”联系，属于m:n联系
    **文章编号**、**话题编号**、发布时间

### 触发器
删除用户：
```sql
DROP TRIGGER IF EXISTS delete_user;
DELIMITER //
CREATE TRIGGER delete_user BEFORE DELETE
ON user FOR EACH ROW
begin       
    DELETE FROM join_acti WHERE 用户编号t = old.用户编号;
end//
DELIMITER ;
```

### 创建视图
```sql
CREATE VIEW user_com AS
SELECT com_doc.评论时间,user.用户编号, user.名称 as 用户昵称,doc.文章编号,doc.名称 as 文章名 ,com_doc.情绪
FROM user,com_doc,doc
WHERE user.用户编号 = com_doc.用户编号t AND doc.文章编号 = com_doc.文章编号t
```